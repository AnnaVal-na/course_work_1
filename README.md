# Приложение для анализа транзакций

Это приложение предназначено для анализа транзакций, хранящихся в Excel-файле. 
Оно генерирует JSON-данные для веб-страниц, формирует Excel-отчеты и предоставляет различные сервисы.

## Выполненные задачи

### Веб-страницы
- Главная страница

### Сервисы
- Выгодные категории повышенного кешбэка

### Отчеты
- Траты по категориям


## Структура модулей и функционал функций

### Модуль: `utils.py`
В этом модуле находятся вспомогательные функции, необходимые для работы главной страницы:

- `load_transactions`: загружает транзакции из Excel-файла с обработкой дат.
- `get_currency_rate`: получает курс валюты через Alpha Vantage API.
- `load_user_settings`: загружает пользовательские настройки из JSON-файла.

### Модуль: `views.py`
Этот модуль содержит функции для отображения главной страницы:

- `get_stock_price`: получает текущую цену акции из S&P 500 через Alpha Vantage API.
- `home_view`: генерирует JSON-ответ для главной страницы.

### Модуль: `reports.py`
В этом модуле представлены функции для сервиса "Траты по категории":

- `_save_report`: сохраняет DataFrame в JSON-файл.
- `spending_by_category`: возвращает траты по заданной категории за последние три месяца от указанной даты.

### Модуль: `services.py`
Здесь находятся функции для сервиса "Выгодные категории повышенного кешбэка":

- `analyze_cashback_categories`: анализирует выгодность категорий для повышенного кешбэка.
- `_is_transaction_in_period`: проверяет принадлежность транзакции к целевому периоду.
- `_accumulate_cashback`: аккумулирует кешбэк по категориям.

### Модуль: `main.py`
Точка входа для запуска приложения:

- `parse_args`: парсинг аргументов командной строки.
- `process_home_command`: обработка команды home.
- `process_cashback_command`: обработка команды cashback.
- `process_report_command`: обработка команды report.
- `main`: главная функция для запуска приложения.

## Тестирование
К каждой функции написаны тесты, что обеспечивает надежность и корректность работы приложения.
Папка tests

## Данные
- Ссылка на Excel-файл c транзакциями: 
https://docs.google.com/spreadsheets/d/1yXnr282zAMcTkEhIwZFaJlPJvAeZIwvB/edit?gid=1794603603#gid=1794603603
- Сервис, предоставляющий API для курса валют и цен взят с сайта:https://www.alphavantage.co/documentation/ 

